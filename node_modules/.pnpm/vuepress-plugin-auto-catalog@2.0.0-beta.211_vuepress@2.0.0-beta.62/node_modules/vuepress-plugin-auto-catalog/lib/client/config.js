import{usePageData as x,useSiteData as U,defineClientConfig as k}from"@vuepress/client";import{useLocaleConfig as w,startsWith as A,keys as G,endsWith as m,hasGlobalComponent as y}from"vuepress-shared/client";import{defineComponent as I,computed as R,h as l}from"vue";import{useRouter as D,RouterLink as f}from"vue-router";import"./styles/auto-catalog.scss";import{u as K,i as M}from"./component-ba31bca5.js";var Y=I({name:"AutoCatalog",props:{base:{type:String,default:""},level:{type:Number,default:3},index:Boolean},setup(c){const h=K(),C=w(AUTO_CATALOG_LOCALES),_=x(),v=D(),T=U(),E=r=>{const u=r[AUTO_CATALOG_INDEX_META_KEY];return typeof u>"u"||u},O=()=>{const r=c.base||_.value.path.replace(/\/[^/]+$/,"/"),u=v.getRoutes(),p=[];return u.filter(({meta:t,path:e})=>{if(!A(e,r)||e===r)return!1;if(r==="/"){const a=G(T.value.locales).filter(n=>n!=="/");if(e==="/404.html"||a.some(n=>A(e,n)))return!1}return(m(e,".html")&&!m(e,"/index.html")||m(e,"/"))&&E(t)}).map(({path:t,meta:e})=>{const a=t.substring(r.length).split("/").length;return{title:e[AUTO_CATALOG_TITLE_META_KEY]||"",icon:e[AUTO_CATALOG_ICON_META_KEY],base:t.replace(/\/[^/]+\/?$/,"/"),order:e[AUTO_CATALOG_ORDER_META_KEY]||null,level:m(t,"/")?a-1:a,path:t}}).filter(({title:t,level:e})=>typeof t=="string"&&t&&e<=c.level).sort(({title:t,level:e,path:a,order:n},{title:i,level:o,path:d,order:s})=>e-o||(m(a,"/index.html")?-1:m(d,"/index.html")?1:n===null?s===null?t.localeCompare(i):s:s===null?n:n>0?s>0?n-s:-1:s<0?n-s:1)).forEach(t=>{var e;const{base:a,level:n}=t;switch(n){case 1:p.push(t);break;case 2:{const i=p.find(o=>o.path===a);i&&(i.children??(i.children=[])).push(t);break}default:{const i=p.find(o=>o.path===a.replace(/\/[^/]+\/$/,"/"));if(i){const o=(e=i.children)==null?void 0:e.find(d=>d.path===a);o&&(o.children??(o.children=[])).push(t)}}}}),p},b=R(()=>O());return()=>l("div",{class:"auto-catalog-wrapper"},[l("h2",{class:"main-title"},C.value.title),b.value.map(({children:r=[],icon:u,path:p,title:t},e)=>[l("h3",{id:t,class:["child-title",{"has-children":r.length}]},[l("a",{href:`#${t}`,class:"header-anchor"},"#"),l(f,{class:"catalog-title",to:p},()=>[c.index?`${e+1}.`:null,u&&h?l(h,{icon:u}):null,t||"Unknown"])]),r.length?l("ul",{class:"child-catalog-wrapper"},r.map(({children:a=[],icon:n,path:i,title:o},d)=>l("li",{class:"child-catalog-item"},[l("div",{class:["sub-title",{"has-children":a.length}]},[l("a",{href:`#${o}`,class:"header-anchor"},"#"),l(f,{class:"catalog-title",to:i},()=>[c.index?`${e+1}.${d+1}`:null,n&&h?l(h,{icon:n}):null,o||"Unknown"])]),a.length?l("div",{class:"sub-catalog-wrapper"},a.map(({icon:s,path:g,title:L},$)=>l(f,{class:"sub-catalog-item",to:g},()=>[c.index?`${e+1}.${d+1}.${$+1}`:null,s&&h?l(h,{icon:s}):null,L||"Unknown"]))):null]))):null])])}}),N=k({enhance:({app:c})=>{M(c),y("AutoCatalog",c)||c.component("AutoCatalog",Y)}});export{N as default};
//# sourceMappingURL=config.js.map
