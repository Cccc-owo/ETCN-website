import{useSassPalettePlugin as f}from"vuepress-plugin-sass-palette";import{Logger as O,ensureEndingSlash as T,getTitleFromFilename as h,checkVersion as E,getLocales as K}from"vuepress-shared/node";import{createPage as L}from"@vuepress/core";import{getDirname as M,path as y}from"@vuepress/utils";const v=M(import.meta.url),A="vuepress-plugin-auto-catalog",C=new O(A),R=T(y.resolve(v,"../client")),$=({pages:o},{component:l,iconGetter:c,iconRouteMetaKey:m="icon",shouldIndex:n,indexRouteMetaKey:u="index",orderGetter:g,orderRouteMetaKey:d="order",titleGetter:r=a=>a.title,titleRouteMetaKey:i="title"})=>{l||o.forEach(a=>{const e={},s=r==null?void 0:r(a),t=c==null?void 0:c(a),p=(n==null?void 0:n(a))??null,_=(g==null?void 0:g(a))??null;s&&(e[i]=s),t&&(e[m]=t),typeof p=="boolean"&&(e[u]=p?1:0),typeof _=="number"&&(e[d]=_),a.routeMeta={...a.routeMeta,...e}})},G=async(o,{component:l="AutoCatalog",exclude:c=[],frontmatter:m=()=>({}),iconComponent:n,level:u=3,index:g=!1})=>{const{env:{isDebug:d},pages:r}=o,i=new Set,a=`<${l}${[1,2].includes(u)?` :level="${u}"`:""}${g?" index":""}>${n?`
  <template #icon="{ icon }">
    <${n} :icon="icon" />
  </template>
`:""}</${l}>
`;r.forEach(({path:e,pathLocale:s})=>{let t=e;if(e!=="/404.html")for(;t!==s;)t=t.replace(/\/(?:[^/]+\/?)$/,"/"),!i.has(t)&&c.every(p=>!t.match(p))&&r.every(({path:p})=>p!==t)&&(d&&C.info(`Generating catalog ${t}}`),i.add(t))}),await Promise.all(Array.from(i).map(e=>decodeURI(e)).map(e=>{const[,s=""]=/\/([^/]+)\/?$/.exec(e)||[],t=h(s);return L(o,{frontmatter:{title:t,...m(e)||{}},content:a,path:e})})).then(e=>{o.pages.push(...e)})},x={"/en/":{title:"Catalog"},"/zh/":{title:"目录"},"/zh-tw/":{title:"目錄"},"/de/":{title:"Katalog"},"/de-at/":{title:"Katalog"},"/vi/":{title:"Danh mục"},"/uk/":{title:"Каталог"},"/ru/":{title:"Каталог"},"/br/":{title:"Catálogo"},"/pl/":{title:"Katalog"},"/sk/":{title:"Katalóg"},"/fr/":{title:"Catalogue"},"/es/":{title:"Catálogo"},"/ja/":{title:"カタログ"},"/tr/":{title:"Katalog"},"/ko/":{title:"목차"},"/fi/":{title:"Luettelo"},"/hu/":{title:"Katalógus"},"/id/":{title:"Katalog"},"/nl/":{title:"Catalogus"}},I=(o={})=>l=>{E(l,A,"2.0.0-beta.61"),l.env.isDebug&&C.info("Options:",o),f(l,{id:"hope"});const{component:c,iconComponent:m,iconRouteMetaKey:n="icon",indexRouteMetaKey:u="index",locales:g,orderRouteMetaKey:d="order",titleRouteMetaKey:r="title"}=o;return{name:A,define:()=>({AUTO_CATALOG_LOCALES:K({app:l,name:A,default:x,config:g}),AUTO_CATALOG_ICON_COMPONENT:m||"",AUTO_CATALOG_TITLE_META_KEY:r,AUTO_CATALOG_ICON_META_KEY:n,AUTO_CATALOG_ORDER_META_KEY:d,AUTO_CATALOG_INDEX_META_KEY:u}),onInitialized:async i=>{$(i,o),await G(i,o)},...c?{}:{clientConfigFile:`${R}config.js`}}};export{I as autoCatalogPlugin};
//# sourceMappingURL=index.js.map
