import{defineComponent as l,shallowRef as r,computed as i,onMounted as d,h as t,Transition as c}from"vue";import{useLocaleConfig as m}from"vuepress-shared/client";import{l as v,U as f}from"../define-3fd15ee3.js";import"../styles/popup.scss";import{u as b}from"../usePWAEvent-f118b552.js";const g=p=>{const e=p.waiting;if(!e)return;const n=new MessageChannel;e.postMessage({type:"SKIP_WAITING"},[n.port2])};var w=l({name:"SWUpdatePopup",slots:Object,setup(p,{slots:e}){const n=m(v),a=r(),u=i(()=>!!a.value),s=()=>{a.value&&(g(a.value),a.value=void 0)};return d(()=>{b().on("updated",o=>{o&&(a.value=o)})}),()=>t(c,{name:"popup"},()=>{var o;return((o=e.default)==null?void 0:o.call(e,{enabled:u.value,reload:s}))||(u.value?t("button",{type:"button",class:"sw-update-popup",tabindex:0,onClick:()=>s()},[n.value.update,t("span",{class:"icon-wrapper"},t(f))]):null)})}});export{w as default};
//# sourceMappingURL=SWUpdatePopup.js.map
