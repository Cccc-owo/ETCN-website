import{usePageData as p,useSiteData as c}from"@vuepress/client";import{defineComponent as f,shallowRef as k,onMounted as h,watch as n,h as l,nextTick as v}from"vue";import{isString as y}from"vuepress-shared/client";import"artalk/dist/Artalk.css";import"../styles/artalk.scss";import{u as w}from"../index-6705f8c9.js";var g=f({name:"Artalk",props:{identifier:{type:String,required:!0},darkmode:Boolean},setup:a=>{const r=w(),o=p(),d=c(),i=k();let e=null;const s=y(r.server),m=async()=>{await Promise.all([import("artalk"),new Promise(t=>{setTimeout(()=>{v().then(t)},r.delay||800)})]).then(([{default:t}])=>{const u=t;try{e=new u({useBackendConf:!1,site:d.value.title,pageTitle:o.value.title,...r,el:i.value,pageKey:a.identifier,darkMode:a.darkmode}),r.useBackendConf&&e.on("conf-loaded",()=>{e.setDarkMode(a.darkmode)})}catch{}})};return h(()=>{n(()=>o.value.path,async()=>{try{e==null||e.destroy()}catch{}await m()},{immediate:!0}),n(()=>a.darkmode,t=>{e==null||e.setDarkMode(t)})}),()=>s?l("div",{class:"artalk-wrapper"},l("div",{ref:i})):null}});export{g as default};
//# sourceMappingURL=Artalk.js.map
